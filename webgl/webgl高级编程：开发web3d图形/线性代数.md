线性代数是高等数学的一部分，它的研究对象是向量和矩阵。

为了更好的理解 3D 图形和 webGL，最好对线性代数有一个基本的认知。

### 1、坐标系

右手坐标系

### 2、点与顶点

一个点是一个位置，2个点可以定义一个线段，三个点可以定义一个三角形。

当点来用定义几何图形时，它们被称为顶点（verex）。

### 3、标量

标量是没有方向的数值（譬如温度、质量、能力）它们完全由数值大小来定义。

### 4、矢量

矢量是两个点之差，它没有位置，但有方向和长度（譬如速度、加速度、力）

它们需要一个数值和一个方向才能得到完全的定义。

一个矢量可以用三个坐标分量（vx, vy, vz）来表示。

一个矢量用一个起点到终点的箭头表示。

起点为 p = (1, 1, 0)，终点为 q = (3, 4, 0)。从终点 q 减去起点 p 可以得到这个矢量：
> v = q - p = (3, 4, 0) - (1, 1, 0) = (2, 3, 0)

两个矢量也可以相加，也就是首位相连:
> v + u = (vx + ux, vy + uy, vz + uz)


![[Pasted image 20220120095557.png]]

矢量也可以乘以一个标量（即一个数值）。得到一个新矢量，矢量的各个分量都乘以这个标量值。

如果一个矢量乘以标量 k = -1，就得到一个与原矢量大小相等、方向相反的矢量。

#### 在 webGL 中，矢量很重要

用矢量指定光线的方向和视线的方向。

法线矢量（简称为法矢量），法矢量垂直于表面，用法矢量来表示朝向。

矢量在基础物理中有很多用途，譬如，用矢量表示速度。如果你打算用 WebGL 设计游戏时，矢量就非常有用。假设太空飞船的速度为 20m/s，方向朝东，与地面平行。则可以用一个矢量表示它： 

> v = (20, 0, 0)

速度的大小就是矢量的长度，太空飞船的方向就是矢量的方向。

#### 矢量相乘：点积或标积

正如标积这个名词所表示的那样，两个矢量相乘的结果是一个标量，不是一个矢量。

他们的点积定义为：

> u * v = |u| * |v| * cosθ

点积与两个矢量之间的最小夹角 θ 有关。

如图所示（中），如果 θ = 90° 时，说明两个矢量是正交的。

由于 cos 90° 等于 0 ，因此夹角为 90° 的两个矢量点积等于 0。

也就是说，如果两个矢量的点积为 0，那这两个矢量肯定是正交的。

![[Pasted image 20220120103150.png]]

- 如图所示（左），两个矢量的夹角小于 90° 时，点积结果大于 0.
- 如图所示（右），两个矢量的夹角大于 90° 时，点积结果小于 0.

#### 矢量相乘：叉积

两个矢量相乘还有另一种形式，即矢量的叉乘（叉积），叉积的结果是一个新的矢量

>w = u * v

叉积的结果是一个新的矢量，这个新矢量有以下属性：
- w 正交于 u 和 v（如图所示）

![[Pasted image 20220120110859.png]]

- |w| = |u| * |v| * sinθ（新矢量的长度等于 u 的长度乘以 v 的长度再乘以 sinθ）

这里的 θ 是 u 和 v 的最小夹角。**当且仅当 u 与 v 平行时，sin 0° = 0，因此 u * v = 0**

> 叉积在 3d 图形中的一个重要应用是计算三角形等表面的法矢量。
> 
> 在 webgl 中进行光照计算时，法矢量是一个重要的因素。

#### 齐次坐标

你有没有发现，在 3D 空间中，点或矢量的写法是一样的，都是三个坐标分量 (x, y, z)

这可能会带来混乱。所以我们引入了齐次坐标来区分。

在齐次坐标中，需要加上第四个坐标（w）。

- w = 0 时，是矢量
- w ≠ 0 时，是点

我们很容易把一个齐次坐标表示的点（px, py pz, pw）变换为三个坐标分量表示的点。只需要每个分量都除以 pw。然后用前三个坐标分量（px, py, pz）表示 3D 空间的点。

如果一个点已经用三个坐标分量表示了，只要在第四个位置加上 1，就可以得到齐次坐标的点。即（px, py, pz, 1）

除了区分点和矢量之间的差异之外，引入齐次坐标的另一个重要因素是：如果一个点可以用 4 个齐次坐标表示，则可以用 4x4 的矩阵表示点的坐标变换（平移、旋转、缩放、剪切）


#### 矩阵（m * n）

在 webgl 中，最常用的矩阵是4行4列 （4x4） 的矩阵。
![[Pasted image 20220120122950.png]]

只有一列的矩阵，称为列矢量
> 在 webgl 中，列矢量很常见。它经常用来表示一个顶点。
> 列矢量乘以一个 4x4 的矩阵，表示对中国顶点执行某个变换操作。
![[Pasted image 20220120123036.png]]

只有一行的矩阵，称为行矢量
![[Pasted image 20220120123056.png]]


#### 矩阵的相加和相减

只有维数完全相同的两个矩阵才可以相加或相减。

两个矩阵的加减运算是对每个元素进行加减（与两个矢量的相加运算相似）

矩阵相加示例：
![[Pasted image 20220120123400.png]]

同理，矩阵相减结果：
![[Pasted image 20220120123455.png]]

#### 矩阵相乘

> 在 WebGL 中，最常用的矩阵相乘是2个矩阵相乘，或 一个 4x4 和一个  4x1 矩阵相乘。

矩阵相乘的结果是一个新的矩阵。

![[Pasted image 20220120140854.png]]

有一点必须指出，矩阵的顺序非常重要。

M * N 的结果不等于 N * M 的结果，因此。 MN ≠ NM。即矩阵相乘不符合交换律。

#### 单位矩阵

对于标量，数值 1 乘以任何数 x，其结果不变。即 1 * x = x

与标量 1 对应的矩阵，就是单位矩阵。所以单位矩阵I 乘以任何矩阵，都等于该矩阵本身。

单位矩阵是这样一个方阵：
- 行数等于列数
- 对角位置元素都为 1
- 其他位置的元素都为零

> 方阵：行数和列数相等的

![[Pasted image 20220120142010.png]]

如果一个 矩阵M 乘以单位矩阵I，其结果还是矩阵M。这说明以下关系成立：

> MI = IM = M


#### 逆矩阵

任何除 0 之外的数，它的倒数与它自身相乘，结果都为 1。

即 > x * 1/x = 1，譬如 2 * 1/2 = 1

同样道理，矩阵 M 的倒数矩阵用 1/M 表示。称为逆矩阵。

同样存在这样的属性：矩阵 M 乘以它的逆矩阵，结果为[[线性代数#单位矩阵]]。

### 转置矩阵

所谓转置就是把行变成列，把列变成行。

矩阵M 转置后得到另一个矩阵。

![[Pasted image 20220120151857.png]]


#### 线性变换

线性变换的示例有缩放、旋转、剪切。在 3D 图形中，点或矢量的线性变换用 3x3 的矩阵表示。

但是，除了这些线性变换外，还有一个非常基本但很重要的变换：平移变换（translation）。平移变换不能用 3x3 矩阵来表示。

#### 仿射变换

仿射变换是这样一个变换：它先执行一个线性变换，再执行一个平移变换。

可以用 4x4 矩阵表示一个仿射变换。如果点或矢量采用齐次坐标表示，则把一个 4x4 变换矩阵乘以列矢量，就可以实现仿射变换。

![[Pasted image 20220120160254.png]]

#### 四种类型的仿射变换

##### 1、平移

平移是指对象的每个顶点都移动一个相同的位移。如图所示：

![[Pasted image 20220120161553.png]]

其位移是由矢量（tx, ty, tz）表示。

下图示例平移一个三角形。其中的位移矢量为（tx, ty, tz） = (4, 5, 0)

![[Pasted image 20220120161829.png]]

下图是一个齐次坐标和矩阵乘法运算：一个点沿着矢量（tx, ty, tz）平移后的位置。

![[Pasted image 20220120171249.png]]

2、旋转
3、缩放
4、剪切


